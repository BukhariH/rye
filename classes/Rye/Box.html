<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Rye::Box</title>
    <meta content='text/html; charset=US-ASCII' http-equiv='Content-Type'>
    <link href='../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          Rye::Box
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../files/lib/rye/box_rb.html">lib/rye/box.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a target="docwin" href="../Rye.html">Rye</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <h1 id="label-Rye%3A%3ABox"><a href="Box.html">Rye::Box</a></h1>
            
            <p>The <a href="Box.html">Rye::Box</a> class represents a machine. All system
            commands are made through this class.</p>
            
            <pre class="ruby"><span class="ruby-identifier">rbox</span> = <span class="ruby-constant">Rye</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'filibuster'</span>)&#x000A;<span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">hostname</span>   <span class="ruby-comment"># =&gt; filibuster</span>&#x000A;<span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">uname</span>      <span class="ruby-comment"># =&gt; FreeBSD</span>&#x000A;<span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">uptime</span>     <span class="ruby-comment"># =&gt; 20:53  up 1 day,  1:52, 4 users</span></pre>
            
            <p>You can also run local commands through SSH</p>
            
            <pre class="ruby"><span class="ruby-identifier">rbox</span> = <span class="ruby-constant">Rye</span><span class="ruby-operator">::</span><span class="ruby-constant">Box</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'localhost'</span>) &#x000A;<span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">hostname</span>   <span class="ruby-comment"># =&gt; localhost</span>&#x000A;<span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">uname</span>(:<span class="ruby-identifier">a</span>)  <span class="ruby-comment"># =&gt; Darwin vanya 9.6.0 ...</span></pre>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-new">new</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-3D-3D">==</a></li>
              <li><a target="docwin" href="#method-i-5B-5D">[]</a></li>
              <li><a target="docwin" href="#method-i-add_keys">add_keys</a></li>
              <li><a target="docwin" href="#method-i-batch">batch</a></li>
              <li><a target="docwin" href="#method-i-cd">cd</a></li>
              <li><a target="docwin" href="#method-i-connect">connect</a></li>
              <li><a target="docwin" href="#method-i-current_umask">current_umask</a></li>
              <li><a target="docwin" href="#method-i-current_working_directory">current_working_directory</a></li>
              <li><a target="docwin" href="#method-i-debug-3F">debug?</a></li>
              <li><a target="docwin" href="#method-i-disable_quiet_mode">disable_quiet_mode</a></li>
              <li><a target="docwin" href="#method-i-disable_safe_mode">disable_safe_mode</a></li>
              <li><a target="docwin" href="#method-i-disable_sudo">disable_sudo</a></li>
              <li><a target="docwin" href="#method-i-disconnect">disconnect</a></li>
              <li><a target="docwin" href="#method-i-enable_quiet_mode">enable_quiet_mode</a></li>
              <li><a target="docwin" href="#method-i-enable_safe_mode">enable_safe_mode</a></li>
              <li><a target="docwin" href="#method-i-enable_sudo">enable_sudo</a></li>
              <li><a target="docwin" href="#method-i-error-3F">error?</a></li>
              <li><a target="docwin" href="#method-i-exception_hook">exception_hook</a></li>
              <li><a target="docwin" href="#method-i-exception_hook-3D">exception_hook=</a></li>
              <li><a target="docwin" href="#method-i-getenv">getenv</a></li>
              <li><a target="docwin" href="#method-i-guess_user_home">guess_user_home</a></li>
              <li><a target="docwin" href="#method-i-host">host</a></li>
              <li><a target="docwin" href="#method-i-host-3D">host=</a></li>
              <li><a target="docwin" href="#method-i-host_key">host_key</a></li>
              <li><a target="docwin" href="#method-i-impltype">impltype</a></li>
              <li><a target="docwin" href="#method-i-impltype-3D">impltype=</a></li>
              <li><a target="docwin" href="#method-i-info-3F">info?</a></li>
              <li><a target="docwin" href="#method-i-inspect">inspect</a></li>
              <li><a target="docwin" href="#method-i-instance_exec">instance_exec</a></li>
              <li><a target="docwin" href="#method-i-interactive_ssh">interactive_ssh</a></li>
              <li><a target="docwin" href="#method-i-keys">keys</a></li>
              <li><a target="docwin" href="#method-i-method_missing">method_missing</a></li>
              <li><a target="docwin" href="#method-i-nickname">nickname</a></li>
              <li><a target="docwin" href="#method-i-nickname-3D">nickname=</a></li>
              <li><a target="docwin" href="#method-i-opts">opts</a></li>
              <li><a target="docwin" href="#method-i-opts-3D">opts=</a></li>
              <li><a target="docwin" href="#method-i-ostype">ostype</a></li>
              <li><a target="docwin" href="#method-i-ostype-3D">ostype=</a></li>
              <li><a target="docwin" href="#method-i-post_command_hook">post_command_hook</a></li>
              <li><a target="docwin" href="#method-i-post_command_hook-3D">post_command_hook=</a></li>
              <li><a target="docwin" href="#method-i-pre_command_hook">pre_command_hook</a></li>
              <li><a target="docwin" href="#method-i-pre_command_hook-3D">pre_command_hook=</a></li>
              <li><a target="docwin" href="#method-i-preview_command">preview_command</a></li>
              <li><a target="docwin" href="#method-i-quiet">quiet</a></li>
              <li><a target="docwin" href="#method-i-quietly">quietly</a></li>
              <li><a target="docwin" href="#method-i-remove_keys">remove_keys</a></li>
              <li><a target="docwin" href="#method-i-root-3F">root?</a></li>
              <li><a target="docwin" href="#attribute-i-rye_pty">rye_pty</a></li>
              <li><a target="docwin" href="#attribute-i-rye_shell">rye_shell</a></li>
              <li><a target="docwin" href="#method-i-safe">safe</a></li>
              <li><a target="docwin" href="#method-i-safe-3F">safe?</a></li>
              <li><a target="docwin" href="#method-i-safely">safely</a></li>
              <li><a target="docwin" href="#method-i-setenv">setenv</a></li>
              <li><a target="docwin" href="#method-i-ssh_config_options">ssh_config_options</a></li>
              <li><a target="docwin" href="#method-i-stash">stash</a></li>
              <li><a target="docwin" href="#method-i-stash-3D">stash=</a></li>
              <li><a target="docwin" href="#method-i-stdout_hook">stdout_hook</a></li>
              <li><a target="docwin" href="#method-i-stdout_hook-3D">stdout_hook=</a></li>
              <li><a target="docwin" href="#method-i-sudo">sudo</a></li>
              <li><a target="docwin" href="#method-i-sudo-3F">sudo?</a></li>
              <li><a target="docwin" href="#method-i-switch_user">switch_user</a></li>
              <li><a target="docwin" href="#method-i-templates">templates</a></li>
              <li><a target="docwin" href="#method-i-templates-3F">templates?</a></li>
              <li><a target="docwin" href="#method-i-to_s">to_s</a></li>
              <li><a target="docwin" href="#method-i-umask-3D">umask=</a></li>
              <li><a target="docwin" href="#method-i-unsafely">unsafely</a></li>
              <li><a target="docwin" href="#method-i-user">user</a></li>
              <li><a target="docwin" href="#method-i-via">via</a></li>
              <li><a target="docwin" href="#method-i-via-3D">via=</a></li>
              <li><a target="docwin" href="#method-i-via-3F">via?</a></li>
              <li><a target="docwin" href="#method-i-via_hop">via_hop</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li><a target="docwin" href="Cmd.html">Rye::Cmd</a></li>
                <li><a target="docwin" href="Box/InstanceExecHelper.html">InstanceExecHelper</a></li>
              </ol>
            </div>
          </div>
          <div id='class-list'>
            <h2>Classes and Modules</h2>
            <ol>
              <li><a target="docwin" href="Box/InstanceExecHelper.html">Rye::Box::InstanceExecHelper</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='aliases-list'>
              <h2>Public Instance Aliases</h2>
              <div class='name-list'>
                <table summary='Public Instance Aliases'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>add_env</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'><a target="docwin" href="#method-i-setenv">setenv</a></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>add_key</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'><a target="docwin" href="#method-i-add_keys">add_keys</a></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>execute</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'><a target="docwin" href="#method-i-method_missing">method_missing</a></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>remove_key</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'><a target="docwin" href="#method-i-remove_keys">remove_keys</a></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>wildly</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'><a target="docwin" href="#method-i-unsafely">unsafely</a></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-rye_pty'>rye_pty</a>
                    </td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-rye_shell'>rye_shell</a>
                    </td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(host='localhost', opts={})</span>
                </div>
                <div class='description'>
                  <ul><li>
                  <p><code>host</code> The hostname to connect to. Default: localhost.</p>
                  </li><li>
                  <p><code>user</code> The username to connect as. Default: SSH config file or
                  current shell user.</p>
                  </li><li>
                  <p><code>opts</code> a hash of optional arguments.</p>
                  </li></ul>
                  
                  <p>The <code>opts</code> hash excepts the following keys:</p>
                  <ul><li>
                  <p>:safe =&gt; should <a href="../Rye.html">Rye</a> be safe? Default: true</p>
                  </li><li>
                  <p>:port =&gt; remote server ssh port. Default: SSH config file or 22</p>
                  </li><li>
                  <p>:keys =&gt; one or more private key file paths (passwordless login)</p>
                  </li><li>
                  <p>:via =&gt; the <a href="Hop.html">Rye::Hop</a> to access this host through</p>
                  </li><li>
                  <p>:info =&gt; an IO object to print <a href="Box.html">Rye::Box</a> command
                  info to. Default: nil</p>
                  </li><li>
                  <p>:debug =&gt; an IO object to print <a href="Box.html">Rye::Box</a>
                  debugging info to. Default: nil</p>
                  </li><li>
                  <p>:error =&gt; an IO object to print <a href="Box.html">Rye::Box</a> errors
                  to. Default: STDERR</p>
                  </li><li>
                  <p>:getenv =&gt; pre-fetch <code>host</code> environment variables? (default:
                  true)</p>
                  </li><li>
                  <p>:password =&gt; the user's password (ignored if there's a valid private
                  key)</p>
                  </li><li>
                  <p>:templates =&gt; the template engine to use for uploaded files. One of:
                  :erb (default)</p>
                  </li><li>
                  <p>:sudo =&gt; Run all commands via sudo (default: false)</p>
                  </li><li>
                  <p>:password_prompt =&gt; Show a password prompt on auth failure (default:
                  true)</p>
                  </li></ul>
                  
                  <p>NOTE: <code>opts</code> can also contain any parameter supported by 
                  Net::SSH.start that is not already mentioned above.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'><span class="ruby-comment"># File lib/rye/box.rb, line 114</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">host</span>=<span class="ruby-string">'localhost'</span>, <span class="ruby-identifier">opts</span>={})&#x000A;  <span class="ruby-identifier">ssh_opts</span> = <span class="ruby-identifier">ssh_config_options</span>(<span class="ruby-identifier">host</span>)&#x000A;  <span class="ruby-ivar">@rye_exception_hook</span> = {}&#x000A;  <span class="ruby-ivar">@rye_host</span> = <span class="ruby-identifier">host</span>&#x000A;  &#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:user</span>]&#x000A;    <span class="ruby-ivar">@rye_user</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:user</span>]&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-ivar">@rye_user</span> = <span class="ruby-identifier">ssh_opts</span>[<span class="ruby-value">:user</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">Rye</span>.<span class="ruby-identifier">sysinfo</span>.<span class="ruby-identifier">user</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-comment"># These opts are use by Rye::Box and also passed to Net::SSH</span>&#x000A;  <span class="ruby-ivar">@rye_opts</span> = {&#x000A;    <span class="ruby-value">:safe</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,&#x000A;    <span class="ruby-value">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ssh_opts</span>[<span class="ruby-value">:port</span>],&#x000A;    <span class="ruby-value">:keys</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Rye</span>.<span class="ruby-identifier">keys</span>,&#x000A;    <span class="ruby-value">:via</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>,&#x000A;    <span class="ruby-value">:info</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>,&#x000A;    <span class="ruby-value">:debug</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">nil</span>,&#x000A;    <span class="ruby-value">:error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">STDERR</span>,&#x000A;    <span class="ruby-value">:getenv</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>,&#x000A;    <span class="ruby-value">:templates</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:erb</span>,&#x000A;    <span class="ruby-value">:quiet</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,&#x000A;    <span class="ruby-value">:password_prompt</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>&#x000A;  }.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>)&#x000A;  &#x000A;  <span class="ruby-comment"># Close the SSH session before Ruby exits. This will do nothing</span>&#x000A;  <span class="ruby-comment"># if disconnect has already been called explicitly. </span>&#x000A;  <span class="ruby-identifier">at_exit</span> { <span class="ruby-keyword">self</span>.<span class="ruby-identifier">disconnect</span> }&#x000A;&#x000A;  <span class="ruby-comment"># Properly handle whether the opt :via is a +Rye::Hop+ or a +String+</span>&#x000A;  <span class="ruby-identifier">via_hop</span>(<span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:via</span>))&#x000A;  &#x000A;  <span class="ruby-comment"># @rye_opts gets sent to Net::SSH so we need to remove the keys</span>&#x000A;  <span class="ruby-comment"># that are not meant for it. </span>&#x000A;  <span class="ruby-ivar">@rye_safe</span>, <span class="ruby-ivar">@rye_debug</span> = <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:safe</span>), <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:debug</span>)&#x000A;  <span class="ruby-ivar">@rye_info</span>, <span class="ruby-ivar">@rye_error</span> = <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:info</span>), <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:error</span>)&#x000A;  <span class="ruby-ivar">@rye_getenv</span> = {} <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:getenv</span>) <span class="ruby-comment"># Enable getenv with a hash</span>&#x000A;  <span class="ruby-ivar">@rye_ostype</span>, <span class="ruby-ivar">@rye_impltype</span> = <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:ostype</span>), <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:impltype</span>)&#x000A;  <span class="ruby-ivar">@rye_quiet</span>, <span class="ruby-ivar">@rye_sudo</span> = <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:quiet</span>), <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:sudo</span>)&#x000A;  <span class="ruby-ivar">@rye_templates</span> = <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:templates</span>)&#x000A;  <span class="ruby-ivar">@rye_password_prompt</span> = <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:password_prompt</span>)&#x000A;&#x000A;  <span class="ruby-comment"># Store the state of the terminal</span>&#x000A;  <span class="ruby-ivar">@rye_stty_save</span> = <span class="ruby-value">%xstty -g`</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>&#x000A;  &#x000A;  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@rye_templates</span>.<span class="ruby-identifier">nil?</span>&#x000A;    <span class="ruby-identifier">require</span> <span class="ruby-ivar">@rye_templates</span>.<span class="ruby-identifier">to_s</span>   <span class="ruby-comment"># should be :erb</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  &#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:logger</span>] = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@rye_debug</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_debug</span> <span class="ruby-comment"># Enable Net::SSH debugging</span>&#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:paranoid</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@rye_safe</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-comment"># See Net::SSH.start</span>&#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>] = [<span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>]].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">compact</span>&#x000A;  &#x000A;  <span class="ruby-comment"># Just in case someone sends a true value rather than IO object</span>&#x000A;  <span class="ruby-ivar">@rye_debug</span> = <span class="ruby-constant">STDERR</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_debug</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">||</span> <span class="ruby-constant">DEBUG</span>&#x000A;  <span class="ruby-ivar">@rye_error</span> = <span class="ruby-constant">STDERR</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_error</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>&#x000A;  <span class="ruby-ivar">@rye_info</span> = <span class="ruby-constant">STDOUT</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_info</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>&#x000A;  &#x000A;  <span class="ruby-comment"># Add the given private keys to the keychain that will be used for @rye_host</span>&#x000A;  <span class="ruby-identifier">add_keys</span>(<span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>])&#x000A;  &#x000A;  <span class="ruby-comment"># We don't want Net::SSH to handle the keypairs. This may change</span>&#x000A;  <span class="ruby-comment"># but for we're letting ssh-agent do it. </span>&#x000A;  <span class="ruby-comment"># TODO: Check if this should ot should not be enabled. </span>&#x000A;  <span class="ruby-comment">#@rye_opts.delete(:keys)</span>&#x000A;  &#x000A;  <span class="ruby-comment"># From: capistrano/lib/capistrano/cli.rb</span>&#x000A;  <span class="ruby-constant">STDOUT</span>.<span class="ruby-identifier">sync</span> = <span class="ruby-keyword">true</span> <span class="ruby-comment"># so that Net::SSH prompts show up</span>&#x000A;  &#x000A;  <span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;ssh-agent info: #{Rye.sshagent_info.inspect}&quot;</span>&#x000A;  <span class="ruby-identifier">debug</span> <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">inspect</span>&#x000A;&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-3D-3D'>
                <a name='method-i-3D-3D'></a>
                <div class='synopsis'>
                  <span class='name'>==</span>
                  <span class='arguments'>(other)</span>
                </div>
                <div class='description'>
                  
                  <p>Compares itself with the <code>other</code> box. If the hostnames are the
                  same, this will return true. Otherwise false.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-3D-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-3D-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 407</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)&#x000A;  <span class="ruby-ivar">@rye_host</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">host</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-5B-5D'>
                <a name='method-i-5B-5D'></a>
                <div class='synopsis'>
                  <span class='name'>[]</span>
                  <span class='arguments'>(fpath=nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Change the current working directory (sort of).</p>
                  
                  <p>I haven't been able to wrangle Net::SSH to do my bidding.  "My bidding" in
                  this case, is maintaining an open channel between commands. I'm using
                  Net::SSH::Connection::Session#exec for all commands which is like a funky
                  helper method that opens a new channel each time it's called. This seems to
                  be okay for one-off  commands but changing the directory only works for the
                  channel it's executed in. The next time exec is called, there's a new
                  channel which is back in the default (home) directory.</p>
                  
                  <p>Long story short, the work around is to maintain the current directory
                  locally and send it with each command.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">pwd</span>              <span class="ruby-comment"># =&gt; /home/rye ($ pwd )</span>&#x000A;<span class="ruby-identifier">rbox</span>[<span class="ruby-string">'/usr/bin'</span>].<span class="ruby-identifier">pwd</span>  <span class="ruby-comment"># =&gt; /usr/bin  ($ cd /usr/bin &amp;&amp; pwd)</span>&#x000A;<span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">pwd</span>              <span class="ruby-comment"># =&gt; /usr/bin  ($ cd /usr/bin &amp;&amp; pwd)</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-5B-5D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-5B-5D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 245</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">fpath</span>=<span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">fpath</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">fpath</span>.<span class="ruby-identifier">index</span>(<span class="ruby-string">'/'</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>&#x000A;    <span class="ruby-ivar">@rye_current_working_directory</span> = <span class="ruby-identifier">fpath</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-comment"># Append to non-absolute paths</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_current_working_directory</span>&#x000A;      <span class="ruby-identifier">newpath</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@rye_current_working_directory</span>, <span class="ruby-identifier">fpath</span>)&#x000A;      <span class="ruby-ivar">@rye_current_working_directory</span> = <span class="ruby-identifier">newpath</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-ivar">@rye_current_working_directory</span> = <span class="ruby-identifier">fpath</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;CWD: #{@rye_current_working_directory}&quot;</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-add_keys'>
                <a name='method-i-add_keys'></a>
                <div class='synopsis'>
                  <span class='name'>add_keys</span>
                  <span class='arguments'>(*keys)</span>
                </div>
                <div class='description'>
                  
                  <p>Add one or more private keys to the list of key paths.</p>
                  <ul><li>
                  <p><code>keys</code> is a list of file paths to private keys</p>
                  </li></ul>
                  
                  <p>Returns the instance of <a href="Box.html">Box</a></p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-add_keys-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-add_keys-source'><span class="ruby-comment"># File lib/rye/box.rb, line 322</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_keys</span>(*<span class="ruby-identifier">keys</span>)&#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>] <span class="ruby-operator">||=</span> []&#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">compact</span>&#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>].<span class="ruby-identifier">uniq!</span>&#x000A;  <span class="ruby-keyword">self</span> <span class="ruby-comment"># MUST RETURN self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-batch'>
                <a name='method-i-batch'></a>
                <div class='synopsis'>
                  <span class='name'>batch</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Execute a block in the context of an instance of <a
                  href="Box.html">Rye::Box</a>.</p>
                  
                  <pre>rbox = Rye::Box.new&#x000A;rbox.batch do&#x000A;  ls :l&#x000A;  uname :a&#x000A;end</pre>
                  
                  <p>OR</p>
                  
                  <pre>rbox.batch(&amp;block)</pre>
                  
                  <p>The batch can also accept arguments.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">batch</span>(<span class="ruby-string">'path/2/file'</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">ls</span> :<span class="ruby-identifier">l</span> <span class="ruby-identifier">file</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                  
                  <p>Returns the return value of the block.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-batch-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-batch-source'><span class="ruby-comment"># File lib/rye/box.rb, line 550</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">batch</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">instance_exec</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-cd'>
                <a name='method-i-cd'></a>
                <div class='synopsis'>
                  <span class='name'>cd</span>
                  <span class='arguments'>(fpath=nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Like [] except it returns an empty <a href="Rap.html">Rye::Rap</a> object
                  to mimick a regular command method. Call with nil key (or no arg) to 
                  reset.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-cd-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-cd-source'><span class="ruby-comment"># File lib/rye/box.rb, line 263</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">cd</span>(<span class="ruby-identifier">fpath</span>=<span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-constant">Rye</span><span class="ruby-operator">::</span><span class="ruby-constant">Rap</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>[<span class="ruby-identifier">fpath</span>])&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-connect'>
                <a name='method-i-connect'></a>
                <div class='synopsis'>
                  <span class='name'>connect</span>
                  <span class='arguments'>(reconnect=true)</span>
                </div>
                <div class='description'>
                  
                  <p>Open an SSH session with +@rye_host+. This called automatically when you
                  the first comamnd is run if it's not already connected. Raises a <a
                  href="NoHost.html">Rye::NoHost</a> exception if +@rye_host+ is not
                  specified. Will attempt a password login up to 3 times if the initial 
                  authentication fails.</p>
                  <ul><li>
                  <p><code>reconnect</code> Disconnect first if already connected. The default</p>
                  </li></ul>
                  
                  <p>is true. When set to false, connect will do nothing if already  connected.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-connect-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-connect-source'><span class="ruby-comment"># File lib/rye/box.rb, line 649</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">connect</span>(<span class="ruby-identifier">reconnect</span>=<span class="ruby-keyword">true</span>)&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-constant">Rye</span><span class="ruby-operator">::</span><span class="ruby-constant">NoHost</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@rye_host</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_ssh</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">reconnect</span>&#x000A;  <span class="ruby-identifier">disconnect</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_ssh</span> &#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_via</span>&#x000A;    <span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Opening connection to #{@rye_host} as #{@rye_user}, via #{@rye_via.host}&quot;</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Opening connection to #{@rye_host} as #{@rye_user}&quot;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">highline</span> = <span class="ruby-constant">HighLine</span>.<span class="ruby-identifier">new</span> <span class="ruby-comment"># Used for password prompt</span>&#x000A;  <span class="ruby-identifier">retried</span> = <span class="ruby-value">0</span>&#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>].<span class="ruby-identifier">compact!</span>  <span class="ruby-comment"># A quick fix in Windows. TODO: Why is there a nil?</span>&#x000A;  <span class="ruby-keyword">begin</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_via</span>&#x000A;      <span class="ruby-comment"># tell the +Rye::Hop+ what and where to setup,</span>&#x000A;      <span class="ruby-comment"># it returns the local port used</span>&#x000A;      <span class="ruby-ivar">@rye_localport</span> = <span class="ruby-ivar">@rye_via</span>.<span class="ruby-identifier">fetch_port</span>(<span class="ruby-ivar">@rye_host</span>, <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:port</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-value">22</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:port</span>] )&#x000A;      <span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;fetched localport #{@rye_localport}&quot;</span>&#x000A;      <span class="ruby-ivar">@rye_ssh</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span>.<span class="ruby-identifier">start</span>(<span class="ruby-string">&quot;localhost&quot;</span>, <span class="ruby-ivar">@rye_user</span>, <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@rye_localport</span>) <span class="ruby-operator">||</span> {}) &#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-ivar">@rye_ssh</span> = <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span>.<span class="ruby-identifier">start</span>(<span class="ruby-ivar">@rye_host</span>, <span class="ruby-ivar">@rye_user</span>, <span class="ruby-ivar">@rye_opts</span> <span class="ruby-operator">||</span> {}) &#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">HostKeyMismatch</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;    <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">message</span>&#x000A;    <span class="ruby-identifier">print</span> <span class="ruby-string">&quot;\a&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_info</span> <span class="ruby-comment"># Ring the bell</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">highline</span>.<span class="ruby-identifier">ask</span>(<span class="ruby-string">&quot;Continue? &quot;</span>).<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp">%r\Ay|yes|sure|ya\z/</span>)&#x000A;      <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:paranoid</span>] = <span class="ruby-keyword">false</span>&#x000A;      <span class="ruby-keyword">retry</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">HostKeyMismatch</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">AuthenticationFailed</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;    <span class="ruby-identifier">print</span> <span class="ruby-string">&quot;\a&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">retried</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@rye_info</span> <span class="ruby-comment"># Ring the bell once</span>&#x000A;    <span class="ruby-identifier">retried</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>&#x000A;&#x000A;    <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:auth_methods</span>] <span class="ruby-operator">||=</span> []&#x000A;&#x000A;    <span class="ruby-comment"># Raise Net::SSH::AuthenticationFailed if publickey is the </span>&#x000A;    <span class="ruby-comment"># only auth method</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:auth_methods</span>] <span class="ruby-operator">==</span> [<span class="ruby-string">&quot;publickey&quot;</span>]&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">AuthenticationFailed</span>&#x000A;    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@rye_password_prompt</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-constant">STDIN</span>.<span class="ruby-identifier">tty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">retried</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">3</span>)&#x000A;      <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Passwordless login failed for #{@rye_user}&quot;</span>&#x000A;      <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:password</span>] = <span class="ruby-identifier">highline</span>.<span class="ruby-identifier">ask</span>(<span class="ruby-string">&quot;Password: &quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">q</span><span class="ruby-operator">|</span> <span class="ruby-identifier">q</span>.<span class="ruby-identifier">echo</span> = <span class="ruby-string">''</span> }.<span class="ruby-identifier">strip</span>&#x000A;      <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:auth_methods</span>].<span class="ruby-identifier">push</span> *[<span class="ruby-string">'keyboard-interactive'</span>, <span class="ruby-string">'password'</span>]&#x000A;      <span class="ruby-keyword">retry</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">AuthenticationFailed</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  &#x000A;  <span class="ruby-comment"># We add :auth_methods (a Net::SSH joint) to force asking for a</span>&#x000A;  <span class="ruby-comment"># password if the initial (key-based) authentication fails. We</span>&#x000A;  <span class="ruby-comment"># need to delete the key from @rye_opts otherwise it lingers until</span>&#x000A;  <span class="ruby-comment"># the next connection (if we switch_user is called for example).</span>&#x000A;  <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value">:auth_methods</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_opts</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:auth_methods</span>)&#x000A;  &#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-current_umask'>
                <a name='method-i-current_umask'></a>
                <div class='synopsis'>
                  <span class='name'>current_umask</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>The most recent valud for umask (or 0022)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-current_umask-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-current_umask-source'><span class="ruby-comment"># File lib/rye/box.rb, line 77</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">current_umask</span>; <span class="ruby-ivar">@rye_current_umask</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-current_working_directory'>
                <a name='method-i-current_working_directory'></a>
                <div class='synopsis'>
                  <span class='name'>current_working_directory</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>The most recent value from <a href="Box.html#method-i-cd">#cd</a> or <a
                  href="Box.html">Box</a>.[]</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-current_working_directory-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-current_working_directory-source'><span class="ruby-comment"># File lib/rye/box.rb, line 74</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">current_working_directory</span>; <span class="ruby-ivar">@rye_current_working_directory</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-debug-3F'>
                <a name='method-i-debug-3F'></a>
                <div class='synopsis'>
                  <span class='name'>debug?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-debug-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-debug-3F-source'><span class="ruby-comment"># File lib/rye/box.rb, line 81</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">debug?</span>; <span class="ruby-operator">!</span><span class="ruby-ivar">@rye_debug</span>.<span class="ruby-identifier">nil?</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-disable_quiet_mode'>
                <a name='method-i-disable_quiet_mode'></a>
                <div class='synopsis'>
                  <span class='name'>disable_quiet_mode</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-disable_quiet_mode-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-disable_quiet_mode-source'><span class="ruby-comment"># File lib/rye/box.rb, line 71</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">disable_quiet_mode</span>; <span class="ruby-ivar">@rye_quiet</span> = <span class="ruby-keyword">false</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-disable_safe_mode'>
                <a name='method-i-disable_safe_mode'></a>
                <div class='synopsis'>
                  <span class='name'>disable_safe_mode</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-disable_safe_mode-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-disable_safe_mode-source'><span class="ruby-comment"># File lib/rye/box.rb, line 67</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">disable_safe_mode</span>; <span class="ruby-ivar">@rye_safe</span> = <span class="ruby-keyword">false</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-disable_sudo'>
                <a name='method-i-disable_sudo'></a>
                <div class='synopsis'>
                  <span class='name'>disable_sudo</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-disable_sudo-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-disable_sudo-source'><span class="ruby-comment"># File lib/rye/box.rb, line 49</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">disable_sudo</span>; <span class="ruby-ivar">@rye_sudo</span> = <span class="ruby-keyword">false</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-disconnect'>
                <a name='method-i-disconnect'></a>
                <div class='synopsis'>
                  <span class='name'>disconnect</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Close the SSH session  with +@rye_host+. This is called  automatically at
                  exit if the connection is open.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-disconnect-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-disconnect-source'><span class="ruby-comment"># File lib/rye/box.rb, line 711</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">disconnect</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@rye_ssh</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@rye_ssh</span>.<span class="ruby-identifier">closed?</span>&#x000A;  <span class="ruby-keyword">begin</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_ssh</span>.<span class="ruby-identifier">busy?</span>;&#x000A;      <span class="ruby-identifier">info</span> <span class="ruby-string">&quot;Is something still running? (ctrl-C to exit)&quot;</span>&#x000A;      <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-identifier">timeout</span>(<span class="ruby-value">10</span>) <span class="ruby-keyword">do</span>&#x000A;        <span class="ruby-ivar">@rye_ssh</span>.<span class="ruby-identifier">loop</span>(<span class="ruby-value">0.3</span>) { <span class="ruby-ivar">@rye_ssh</span>.<span class="ruby-identifier">busy?</span>; }&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Closing connection to #{@rye_ssh.host}&quot;</span>&#x000A;    <span class="ruby-ivar">@rye_ssh</span>.<span class="ruby-identifier">close</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_via</span>&#x000A;      <span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;disconnecting Hop #{@rye_via.host}&quot;</span>&#x000A;      <span class="ruby-ivar">@rye_via</span>.<span class="ruby-identifier">disconnect</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>, <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>&#x000A;    <span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Rye::Box: Disconnect timeout (#{ex.message})&quot;</span>&#x000A;    <span class="ruby-identifier">debug</span> <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">backtrace</span>&#x000A;  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Interrupt</span>&#x000A;    <span class="ruby-identifier">debug</span> <span class="ruby-string">&quot;Exiting...&quot;</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-enable_quiet_mode'>
                <a name='method-i-enable_quiet_mode'></a>
                <div class='synopsis'>
                  <span class='name'>enable_quiet_mode</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-enable_quiet_mode-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-enable_quiet_mode-source'><span class="ruby-comment"># File lib/rye/box.rb, line 70</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">enable_quiet_mode</span>;  <span class="ruby-ivar">@rye_quiet</span> = <span class="ruby-keyword">true</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-enable_safe_mode'>
                <a name='method-i-enable_safe_mode'></a>
                <div class='synopsis'>
                  <span class='name'>enable_safe_mode</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-enable_safe_mode-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-enable_safe_mode-source'><span class="ruby-comment"># File lib/rye/box.rb, line 66</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">enable_safe_mode</span>;  <span class="ruby-ivar">@rye_safe</span> = <span class="ruby-keyword">true</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-enable_sudo'>
                <a name='method-i-enable_sudo'></a>
                <div class='synopsis'>
                  <span class='name'>enable_sudo</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-enable_sudo-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-enable_sudo-source'><span class="ruby-comment"># File lib/rye/box.rb, line 48</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">enable_sudo</span>; <span class="ruby-ivar">@rye_sudo</span> = <span class="ruby-keyword">true</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-error-3F'>
                <a name='method-i-error-3F'></a>
                <div class='synopsis'>
                  <span class='name'>error?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-error-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-error-3F-source'><span class="ruby-comment"># File lib/rye/box.rb, line 82</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">error?</span>; <span class="ruby-operator">!</span><span class="ruby-ivar">@rye_error</span>.<span class="ruby-identifier">nil?</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-exception_hook'>
                <a name='method-i-exception_hook'></a>
                <div class='synopsis'>
                  <span class='name'>exception_hook</span>
                  <span class='arguments'>(klass, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Supply a block to be called whenever there's an Exception. It's called with
                  1 argument: the exception class. If the exception block returns  :retry,
                  the command will be executed again.</p>
                  
                  <p>e.g.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">exception_hook</span>(<span class="ruby-constant">CommandNotFound</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ex</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;An error occurred: #{ex.class}&quot;</span>&#x000A;  <span class="ruby-identifier">choice</span> = <span class="ruby-constant">Annoy</span>.<span class="ruby-identifier">get_user_input</span>(<span class="ruby-string">'(S)kip  (R)etry  (A)bort: '</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">choice</span> <span class="ruby-operator">==</span> <span class="ruby-string">'R'</span>&#x000A;    :<span class="ruby-keyword">retry</span> &#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">choice</span> <span class="ruby-operator">==</span> <span class="ruby-string">'S'</span>&#x000A;    <span class="ruby-comment"># do nothing</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">exit</span>  <span class="ruby-comment"># !</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-exception_hook-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-exception_hook-source'><span class="ruby-comment"># File lib/rye/box.rb, line 526</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">exception_hook</span>(<span class="ruby-identifier">klass</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-ivar">@rye_exception_hook</span>[<span class="ruby-identifier">klass</span>] = <span class="ruby-identifier">block</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-ivar">@rye_exception_hook</span>[<span class="ruby-identifier">klass</span>]&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-exception_hook-3D'>
                <a name='method-i-exception_hook-3D'></a>
                <div class='synopsis'>
                  <span class='name'>exception_hook=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                  <p>A Hash. The keys are exception classes, the values are Procs to execute</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-exception_hook-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-exception_hook-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 90</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">exception_hook=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_exception_hook</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-getenv'>
                <a name='method-i-getenv'></a>
                <div class='synopsis'>
                  <span class='name'>getenv</span>
                  <span class='arguments'>(key=nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the hash containing the parsed output of "env" on the  remote
                  machine. If the initialize option <code>:getenv</code> was set to  false,
                  this will return an empty hash.  This is a lazy loaded method so it fetches
                  the remote envvars the first time this method is called.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">puts</span> <span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">getenv</span>[<span class="ruby-string">'HOME'</span>]    <span class="ruby-comment"># =&gt; &quot;/home/gloria&quot; (remote)</span></pre>
                  
                  <p>NOTE: This method should not raise an exception under normal circumstances.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-getenv-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-getenv-source'><span class="ruby-comment"># File lib/rye/box.rb, line 367</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">getenv</span>(<span class="ruby-identifier">key</span>=<span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_getenv</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@rye_getenv</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">can?</span>(<span class="ruby-value">:env</span>)&#x000A;    <span class="ruby-identifier">vars</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">quietly</span> { <span class="ruby-identifier">env</span> } <span class="ruby-keyword">rescue</span> []&#x000A;    <span class="ruby-identifier">vars</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">nvpair</span><span class="ruby-operator">|</span> &#x000A;      <span class="ruby-comment"># Parse &quot;GLORIA_HOME=/gloria/lives/here&quot; into a name/value</span>&#x000A;      <span class="ruby-comment"># pair. The regexp ensures we split only at the 1st = sign</span>&#x000A;      <span class="ruby-identifier">n</span>, <span class="ruby-identifier">v</span> = <span class="ruby-identifier">nvpair</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">%r\A([\w_-]+?)=(.+)\z/</span>).<span class="ruby-identifier">flatten</span>&#x000A;      <span class="ruby-ivar">@rye_getenv</span>[<span class="ruby-identifier">n</span>] = <span class="ruby-identifier">v</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">key</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@rye_getenv</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@rye_getenv</span>[<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>]&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-guess_user_home'>
                <a name='method-i-guess_user_home'></a>
                <div class='synopsis'>
                  <span class='name'>guess_user_home</span>
                  <span class='arguments'>(other_user=nil)</span>
                </div>
                <div class='description'>
                  
                  <p>Uses the output of "useradd -D" to determine the default home directory.
                  This returns a GUESS rather than the a user's real home directory.
                  Currently used only by authorize_keys_remote. Only useful before you've
                  logged in. Otherwise check $HOME</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-guess_user_home-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-guess_user_home-source'><span class="ruby-comment"># File lib/rye/box.rb, line 421</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">guess_user_home</span>(<span class="ruby-identifier">other_user</span>=<span class="ruby-keyword">nil</span>)&#x000A;  <span class="ruby-identifier">this_user</span> = <span class="ruby-identifier">other_user</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:user</span>]&#x000A;  <span class="ruby-ivar">@rye_guessed_homes</span> <span class="ruby-operator">||=</span> {}&#x000A;  &#x000A;  <span class="ruby-comment"># A simple cache. </span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@rye_guessed_homes</span>[<span class="ruby-identifier">this_user</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_guessed_homes</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">this_user</span>)&#x000A;  &#x000A;  <span class="ruby-comment"># Some junk to determine where user home directories are by default.</span>&#x000A;  <span class="ruby-comment"># We're relying on the command &quot;useradd -D&quot; so this may not work on</span>&#x000A;  <span class="ruby-comment"># different Linuxen and definitely won't work on Windows.</span>&#x000A;  <span class="ruby-comment"># This code will be abstracted out once I find a decent home for it.</span>&#x000A;  <span class="ruby-comment"># /etc/default/useradd, HOME=/home OR useradd -D</span>&#x000A;  <span class="ruby-comment"># /etc/adduser.config, DHOME=/home OR ??</span>&#x000A;  <span class="ruby-identifier">user_defaults</span> = {}&#x000A;  <span class="ruby-identifier">ostmp</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">ostype</span>&#x000A;  <span class="ruby-identifier">ostmp</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">ostype</span>.<span class="ruby-identifier">to_s</span>&#x000A;  &#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">ostmp</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;sunos&quot;</span>&#x000A;    <span class="ruby-comment">#nv.scan(/([\w_-]+?)=(.+?)\s/).each do |n, v|</span>&#x000A;    <span class="ruby-comment">#  n = 'HOME' if n == 'basedir'</span>&#x000A;    <span class="ruby-comment">#  user_defaults[n.upcase] = v.strip</span>&#x000A;    <span class="ruby-comment">#end</span>&#x000A;    <span class="ruby-comment"># In Solaris, useradd -D says the default home path is /home</span>&#x000A;    <span class="ruby-comment"># but that directory is not writable. See: http://bit.ly/IJDD0</span>&#x000A;    <span class="ruby-identifier">user_defaults</span>[<span class="ruby-string">'HOME'</span>] = <span class="ruby-string">'/export/home'</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">ostmp</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;darwin&quot;</span>&#x000A;    <span class="ruby-identifier">user_defaults</span>[<span class="ruby-string">'HOME'</span>] = <span class="ruby-string">'/Users'</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">ostmp</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;windows&quot;</span>&#x000A;    <span class="ruby-identifier">user_defaults</span>[<span class="ruby-string">'HOME'</span>] = <span class="ruby-string">'C:/Documents and Settings'</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">raw</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">quietly</span> { <span class="ruby-identifier">useradd</span>(<span class="ruby-value">:D</span>) } <span class="ruby-keyword">rescue</span> []&#x000A;    <span class="ruby-identifier">raw</span> = [<span class="ruby-string">&quot;HOME=/home&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">raw</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">raw</span>.<span class="ruby-identifier">empty?</span>&#x000A;    <span class="ruby-identifier">raw</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">nv</span><span class="ruby-operator">|</span>&#x000A;      <span class="ruby-identifier">n</span>, <span class="ruby-identifier">v</span> = <span class="ruby-identifier">nv</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">%r\A([\w_-]+?)=(.+)\z/</span>).<span class="ruby-identifier">flatten</span>&#x000A;      <span class="ruby-identifier">user_defaults</span>[<span class="ruby-identifier">n</span>] = <span class="ruby-identifier">v</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  &#x000A;  <span class="ruby-ivar">@rye_guessed_homes</span>[<span class="ruby-identifier">this_user</span>] = <span class="ruby-node">&quot;#{user_defaults['HOME']}/#{this_user}&quot;</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-host'>
                <a name='method-i-host'></a>
                <div class='synopsis'>
                  <span class='name'>host</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-host-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-host-source'><span class="ruby-comment"># File lib/rye/box.rb, line 39</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">host</span>; <span class="ruby-ivar">@rye_host</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-host-3D'>
                <a name='method-i-host-3D'></a>
                <div class='synopsis'>
                  <span class='name'>host=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-host-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-host-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 58</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">host=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_host</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-host_key'>
                <a name='method-i-host_key'></a>
                <div class='synopsis'>
                  <span class='name'>host_key</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the host SSH keys for this box</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-host_key-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-host_key-source'><span class="ruby-comment"># File lib/rye/box.rb, line 412</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">host_key</span>&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;No host&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@rye_host</span>&#x000A;  <span class="ruby-constant">Rye</span>.<span class="ruby-identifier">remote_host_keys</span>(<span class="ruby-ivar">@rye_host</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-impltype'>
                <a name='method-i-impltype'></a>
                <div class='synopsis'>
                  <span class='name'>impltype</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-impltype-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-impltype-source'><span class="ruby-comment"># File lib/rye/box.rb, line 352</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">impltype</span>&#x000A;  <span class="ruby-ivar">@rye_impltype</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-impltype-3D'>
                <a name='method-i-impltype-3D'></a>
                <div class='synopsis'>
                  <span class='name'>impltype=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-impltype-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-impltype-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 85</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">impltype=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_impltype</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-info-3F'>
                <a name='method-i-info-3F'></a>
                <div class='synopsis'>
                  <span class='name'>info?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-info-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-info-3F-source'><span class="ruby-comment"># File lib/rye/box.rb, line 80</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">info?</span>; <span class="ruby-operator">!</span><span class="ruby-ivar">@rye_info</span>.<span class="ruby-identifier">nil?</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-inspect'>
                <a name='method-i-inspect'></a>
                <div class='synopsis'>
                  <span class='name'>inspect</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-inspect-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-inspect-source'><span class="ruby-comment"># File lib/rye/box.rb, line 397</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect</span>&#x000A;  <span class="ruby-string">%q{#&lt;%s:%s name=%s cwd=%s umask=%s env=%s safe=%s opts=%s keys=%s&gt;}</span> <span class="ruby-operator">%</span> &#x000A;  [<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">host</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">nickname</span>,&#x000A;   <span class="ruby-ivar">@rye_current_working_directory</span>, <span class="ruby-ivar">@rye_current_umask</span>,&#x000A;   (<span class="ruby-ivar">@rye_current_environment_variables</span> <span class="ruby-operator">||</span> <span class="ruby-string">''</span>).<span class="ruby-identifier">inspect</span>,&#x000A;   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">safe</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">opts</span>.<span class="ruby-identifier">inspect</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">inspect</span>]&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-instance_exec'>
                <a name='method-i-instance_exec'></a>
                <div class='synopsis'>
                  <span class='name'>instance_exec</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-instance_exec-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-instance_exec-source'><span class="ruby-comment"># File lib/rye/box.rb, line 615</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">instance_exec</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>) <span class="ruby-comment"># !&gt; method redefined; discarding old instance_exec</span>&#x000A;  <span class="ruby-identifier">mname</span> = <span class="ruby-node">&quot;__instance_exec_#{Thread.current.object_id.abs}_#{object_id.abs}&quot;</span>&#x000A;  <span class="ruby-constant">InstanceExecHelper</span>.<span class="ruby-identifier">module_eval</span>{ <span class="ruby-identifier">define_method</span>(<span class="ruby-identifier">mname</span>, &amp;<span class="ruby-identifier">block</span>) }&#x000A;  <span class="ruby-keyword">begin</span>&#x000A;    <span class="ruby-identifier">ret</span> = <span class="ruby-identifier">send</span>(<span class="ruby-identifier">mname</span>, *<span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-keyword">ensure</span>&#x000A;    <span class="ruby-constant">InstanceExecHelper</span>.<span class="ruby-identifier">module_eval</span>{ <span class="ruby-identifier">undef_method</span>(<span class="ruby-identifier">mname</span>) } <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">ret</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-interactive_ssh'>
                <a name='method-i-interactive_ssh'></a>
                <div class='synopsis'>
                  <span class='name'>interactive_ssh</span>
                  <span class='arguments'>(run=true)</span>
                </div>
                <div class='description'>
                  
                  <p>If STDIN.tty? is true (i.e. if we're connected to a terminal with a human
                  at the helm), this will open an SSH connection via the regular SSH command
                  (via a call to system). This  requires the SSH command-line executable
                  (ssh).</p>
                  
                  <p>If STDIN.tty? is false or <code>run</code> is false, this will return  the
                  SSH command (a String) that would have been run.</p>
                  
                  <p>NOTE: As of <a href="../Rye.html">Rye</a> 0.9 you can run interactive
                  sessions with rye by calling any shell method without arguments.</p>
                  
                  <p>e.g.</p>
                  
                  <pre>rbox = Rye::Box.new 'somemachine'&#x000A;rbox.bash</pre>
                  
                  <p>TODO: refactor to use net_ssh_exec! in 0.9</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-interactive_ssh-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-interactive_ssh-source'><span class="ruby-comment"># File lib/rye/box.rb, line 308</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">interactive_ssh</span>(<span class="ruby-identifier">run</span>=<span class="ruby-keyword">true</span>)&#x000A;  <span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;interactive_ssh with keys: #{@rye_opts[:keys].inspect}&quot;</span>&#x000A;  <span class="ruby-identifier">run</span> = <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">STDIN</span>.<span class="ruby-identifier">tty?</span>&#x000A;  <span class="ruby-identifier">args</span> = []&#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">push</span> *[<span class="ruby-value">:i</span>, <span class="ruby-identifier">key</span>] }&#x000A;  <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{@rye_user}@#{@rye_host}&quot;</span>&#x000A;  <span class="ruby-identifier">cmd</span> = <span class="ruby-constant">Rye</span>.<span class="ruby-identifier">prepare_command</span>(<span class="ruby-string">&quot;ssh&quot;</span>, <span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-identifier">cmd</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">run</span>&#x000A;  <span class="ruby-identifier">system</span>(<span class="ruby-identifier">cmd</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-keys'>
                <a name='method-i-keys'></a>
                <div class='synopsis'>
                  <span class='name'>keys</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>See <a href="../Rye.html#method-i-keys">Rye#keys</a></p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-keys-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-keys-source'><span class="ruby-comment"># File lib/rye/box.rb, line 392</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">keys</span>; <span class="ruby-constant">Rye</span>.<span class="ruby-identifier">keys</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-method_missing'>
                <a name='method-i-method_missing'></a>
                <div class='synopsis'>
                  <span class='name'>method_missing</span>
                  <span class='arguments'>(cmd, *args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>A handler for undefined commands.  Raises <a
                  href="CommandNotFound.html">Rye::CommandNotFound</a> exception.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-method_missing-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-method_missing-source'><span class="ruby-comment"># File lib/rye/box.rb, line 464</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">cmd</span>, *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">cmd</span> <span class="ruby-operator">==</span> <span class="ruby-value">:to_ary</span>&#x000A;    <span class="ruby-keyword">super</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@rye_safe</span>&#x000A;    <span class="ruby-identifier">ex</span> = <span class="ruby-constant">Rye</span><span class="ruby-operator">::</span><span class="ruby-constant">CommandNotFound</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">cmd</span>.<span class="ruby-identifier">to_s</span>)&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-identifier">ex</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@rye_exception_hook</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">class</span>&#x000A;    <span class="ruby-ivar">@rye_exception_hook</span>[<span class="ruby-constant">Rye</span><span class="ruby-operator">::</span><span class="ruby-constant">CommandNotFound</span>].<span class="ruby-identifier">call</span> <span class="ruby-identifier">ex</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">nil?</span>&#x000A;      <span class="ruby-identifier">run_command</span> <span class="ruby-identifier">cmd</span>, *<span class="ruby-identifier">args</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">ex</span> = <span class="ruby-constant">Rye</span><span class="ruby-operator">::</span><span class="ruby-constant">CommandNotFound</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">cmd</span>.<span class="ruby-identifier">to_s</span>)&#x000A;      <span class="ruby-identifier">raise</span> <span class="ruby-identifier">ex</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@rye_exception_hook</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">class</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-nickname'>
                <a name='method-i-nickname'></a>
                <div class='synopsis'>
                  <span class='name'>nickname</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-nickname-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-nickname-source'><span class="ruby-comment"># File lib/rye/box.rb, line 56</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">nickname</span>; <span class="ruby-ivar">@rye_nickname</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">host</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-nickname-3D'>
                <a name='method-i-nickname-3D'></a>
                <div class='synopsis'>
                  <span class='name'>nickname=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-nickname-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-nickname-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 64</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">nickname=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_nickname</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-opts'>
                <a name='method-i-opts'></a>
                <div class='synopsis'>
                  <span class='name'>opts</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-opts-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-opts-source'><span class="ruby-comment"># File lib/rye/box.rb, line 40</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">opts</span>; <span class="ruby-ivar">@rye_opts</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-opts-3D'>
                <a name='method-i-opts-3D'></a>
                <div class='synopsis'>
                  <span class='name'>opts=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-opts-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-opts-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 59</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">opts=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_opts</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-ostype'>
                <a name='method-i-ostype'></a>
                <div class='synopsis'>
                  <span class='name'>ostype</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Return the value of uname in lowercase This is a temporary fix. We can use
                  SysInfo for this, upload it, execute it directly, parse the output.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-ostype-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-ostype-source'><span class="ruby-comment"># File lib/rye/box.rb, line 344</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">ostype</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@rye_ostype</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rye_ostype</span> <span class="ruby-comment"># simple cache</span>&#x000A;  <span class="ruby-identifier">os</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">quietly</span> { <span class="ruby-identifier">uname</span>.<span class="ruby-identifier">first</span> } <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-identifier">os</span> <span class="ruby-operator">||=</span> <span class="ruby-string">'unknown'</span>&#x000A;  <span class="ruby-identifier">os</span> <span class="ruby-operator">&amp;&amp;=</span> <span class="ruby-identifier">os</span>.<span class="ruby-identifier">downcase</span>&#x000A;  <span class="ruby-ivar">@rye_ostype</span> = <span class="ruby-identifier">os</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-ostype-3D'>
                <a name='method-i-ostype-3D'></a>
                <div class='synopsis'>
                  <span class='name'>ostype=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-ostype-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-ostype-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 84</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">ostype=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_ostype</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-post_command_hook'>
                <a name='method-i-post_command_hook'></a>
                <div class='synopsis'>
                  <span class='name'>post_command_hook</span>
                  <span class='arguments'>(&block)</span>
                </div>
                <div class='description'>
                  
                  <p>Supply a block to be called after every command. It's called with one
                  argument: an instance of <a href="Rap.html">Rye::Rap</a>.</p>
                  
                  <p>When this block is supplied, the command does not raise an  exception when
                  the exit code is greater than 0 (the typical behavior) so the block needs
                  to check the <a href="Rap.html">Rye::Rap</a> object to determine whether an
                  exception should be raised.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-post_command_hook-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-post_command_hook-source'><span class="ruby-comment"># File lib/rye/box.rb, line 634</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">post_command_hook</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-ivar">@rye_post_command_hook</span> = <span class="ruby-identifier">block</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-ivar">@rye_post_command_hook</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-post_command_hook-3D'>
                <a name='method-i-post_command_hook-3D'></a>
                <div class='synopsis'>
                  <span class='name'>post_command_hook=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-post_command_hook-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-post_command_hook-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 88</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">post_command_hook=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_post_command_hook</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-pre_command_hook'>
                <a name='method-i-pre_command_hook'></a>
                <div class='synopsis'>
                  <span class='name'>pre_command_hook</span>
                  <span class='arguments'>(&block)</span>
                </div>
                <div class='description'>
                  
                  <p>Supply a block to be called before every command. It's called with three
                  arguments: command name, an Array of arguments, user name, hostname e.g.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">pre_command_hook</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cmd</span>,<span class="ruby-identifier">args</span>,<span class="ruby-identifier">user</span>,<span class="ruby-identifier">host</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-operator">...</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-pre_command_hook-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-pre_command_hook-source'><span class="ruby-comment"># File lib/rye/box.rb, line 494</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">pre_command_hook</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-ivar">@rye_pre_command_hook</span> = <span class="ruby-identifier">block</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-ivar">@rye_pre_command_hook</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-pre_command_hook-3D'>
                <a name='method-i-pre_command_hook-3D'></a>
                <div class='synopsis'>
                  <span class='name'>pre_command_hook=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-pre_command_hook-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-pre_command_hook-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 86</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">pre_command_hook=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_pre_command_hook</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-preview_command'>
                <a name='method-i-preview_command'></a>
                <div class='synopsis'>
                  <span class='name'>preview_command</span>
                  <span class='arguments'>(*args)</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the command an arguments as a String.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-preview_command-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-preview_command-source'><span class="ruby-comment"># File lib/rye/box.rb, line 483</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">preview_command</span>(*<span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-identifier">prep_args</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">join</span>(<span class="ruby-string">' '</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-quiet'>
                <a name='method-i-quiet'></a>
                <div class='synopsis'>
                  <span class='name'>quiet</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-quiet-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-quiet-source'><span class="ruby-comment"># File lib/rye/box.rb, line 54</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">quiet</span>; <span class="ruby-ivar">@rye_quiet</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-quietly'>
                <a name='method-i-quietly'></a>
                <div class='synopsis'>
                  <span class='name'>quietly</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Like batch, except it enables quiet mode before executing the block.  After
                  executing the block, quiet mode is returned back to whichever state it was
                  previously in. In other words, this method won't enable quiet mode if it
                  was already disabled.</p>
                  
                  <p>In quiet mode, the pre and post command hooks are not called. This  is used
                  internally when calling commands like <code>ls</code> to check whether a
                  file path exists (to prevent polluting the logs).</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-quietly-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-quietly-source'><span class="ruby-comment"># File lib/rye/box.rb, line 584</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">quietly</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">previous_state</span> = <span class="ruby-ivar">@rye_quiet</span>&#x000A;  <span class="ruby-identifier">enable_quiet_mode</span>&#x000A;  <span class="ruby-identifier">ret</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">instance_exec</span> *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-ivar">@rye_quiet</span> = <span class="ruby-identifier">previous_state</span>&#x000A;  <span class="ruby-identifier">ret</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-remove_keys'>
                <a name='method-i-remove_keys'></a>
                <div class='synopsis'>
                  <span class='name'>remove_keys</span>
                  <span class='arguments'>(*keys)</span>
                </div>
                <div class='description'>
                  
                  <p>Remove one or more private keys fromt he list of key paths.</p>
                  <ul><li>
                  <p><code>keys</code> is a list of file paths to private keys</p>
                  </li></ul>
                  
                  <p>Returns the instance of <a href="Box.html">Box</a></p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-remove_keys-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-remove_keys-source'><span class="ruby-comment"># File lib/rye/box.rb, line 333</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_keys</span>(*<span class="ruby-identifier">keys</span>)&#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>] <span class="ruby-operator">||=</span> []&#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">compact</span>&#x000A;  <span class="ruby-ivar">@rye_opts</span>[<span class="ruby-value">:keys</span>].<span class="ruby-identifier">uniq!</span>&#x000A;  <span class="ruby-keyword">self</span> <span class="ruby-comment"># MUST RETURN self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-root-3F'>
                <a name='method-i-root-3F'></a>
                <div class='synopsis'>
                  <span class='name'>root?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-root-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-root-3F-source'><span class="ruby-comment"># File lib/rye/box.rb, line 43</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">root?</span>; <span class="ruby-identifier">user</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;root&quot;</span> <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-safe'>
                <a name='method-i-safe'></a>
                <div class='synopsis'>
                  <span class='name'>safe</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-safe-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-safe-source'><span class="ruby-comment"># File lib/rye/box.rb, line 41</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">safe</span>; <span class="ruby-ivar">@rye_safe</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-safe-3F'>
                <a name='method-i-safe-3F'></a>
                <div class='synopsis'>
                  <span class='name'>safe?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-safe-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-safe-3F-source'><span class="ruby-comment"># File lib/rye/box.rb, line 68</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">safe?</span>; <span class="ruby-ivar">@rye_safe</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-safely'>
                <a name='method-i-safely'></a>
                <div class='synopsis'>
                  <span class='name'>safely</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>See unsafely (except in reverse)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-safely-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-safely-source'><span class="ruby-comment"># File lib/rye/box.rb, line 568</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">safely</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">previous_state</span> = <span class="ruby-ivar">@rye_safe</span>&#x000A;  <span class="ruby-identifier">enable_safe_mode</span>&#x000A;  <span class="ruby-identifier">ret</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">instance_exec</span> *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-ivar">@rye_safe</span> = <span class="ruby-identifier">previous_state</span>&#x000A;  <span class="ruby-identifier">ret</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-setenv'>
                <a name='method-i-setenv'></a>
                <div class='synopsis'>
                  <span class='name'>setenv</span>
                  <span class='arguments'>(n, v)</span>
                </div>
                <div class='description'>
                  
                  <p>Add an environment variable. <code>n</code> and <code>v</code> are the name
                  and value. Returns the instance of <a href="Box.html">Rye::Box</a></p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-setenv-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-setenv-source'><span class="ruby-comment"># File lib/rye/box.rb, line 382</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">setenv</span>(<span class="ruby-identifier">n</span>, <span class="ruby-identifier">v</span>)&#x000A;  <span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Adding env: #{n}=#{v}&quot;</span>&#x000A;  <span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;prev value: #{@rye_getenv[n]}&quot;</span>&#x000A;  <span class="ruby-ivar">@rye_getenv</span>[<span class="ruby-identifier">n</span>] = <span class="ruby-identifier">v</span>&#x000A;  (<span class="ruby-ivar">@rye_current_environment_variables</span> <span class="ruby-operator">||=</span> {})[<span class="ruby-identifier">n</span>] = <span class="ruby-identifier">v</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-ssh_config_options'>
                <a name='method-i-ssh_config_options'></a>
                <div class='synopsis'>
                  <span class='name'>ssh_config_options</span>
                  <span class='arguments'>(host)</span>
                </div>
                <div class='description'>
                  
                  <p>Parse SSH config files for use with Net::SSH</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-ssh_config_options-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-ssh_config_options-source'><span class="ruby-comment"># File lib/rye/box.rb, line 190</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">ssh_config_options</span>(<span class="ruby-identifier">host</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">SSH</span><span class="ruby-operator">::</span><span class="ruby-constant">Config</span>.<span class="ruby-identifier">for</span>(<span class="ruby-identifier">host</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-stash'>
                <a name='method-i-stash'></a>
                <div class='synopsis'>
                  <span class='name'>stash</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns the current value of the stash +@rye_stash+</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-stash-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-stash-source'><span class="ruby-comment"># File lib/rye/box.rb, line 53</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">stash</span>; <span class="ruby-ivar">@rye_stash</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-stash-3D'>
                <a name='method-i-stash-3D'></a>
                <div class='synopsis'>
                  <span class='name'>stash=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                  <p>Store a value to the stash +@rye_stash+</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-stash-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-stash-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 63</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">stash=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_stash</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-stdout_hook'>
                <a name='method-i-stdout_hook'></a>
                <div class='synopsis'>
                  <span class='name'>stdout_hook</span>
                  <span class='arguments'>(&block)</span>
                </div>
                <div class='description'>
                  
                  <p>Supply a block to be called every time a command receives STDOUT data.</p>
                  
                  <p>e.g.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">rbox</span>.<span class="ruby-identifier">stdout_hook</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">content</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-operator">...</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-stdout_hook-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-stdout_hook-source'><span class="ruby-comment"># File lib/rye/box.rb, line 505</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">stdout_hook</span>(&amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-ivar">@rye_stdout_hook</span> = <span class="ruby-identifier">block</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-ivar">@rye_stdout_hook</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-stdout_hook-3D'>
                <a name='method-i-stdout_hook-3D'></a>
                <div class='synopsis'>
                  <span class='name'>stdout_hook=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-stdout_hook-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-stdout_hook-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 87</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">stdout_hook=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_stdout_hook</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-sudo'>
                <a name='method-i-sudo'></a>
                <div class='synopsis'>
                  <span class='name'>sudo</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Like batch, except it enables sudo mode before executing the block. If the
                  user is already root, this has no effect. Otherwise all  commands executed
                  in the block will run via sudo.</p>
                  
                  <p>If no block is specified then sudo is called just like a regular command.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-sudo-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-sudo-source'><span class="ruby-comment"># File lib/rye/box.rb, line 598</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">sudo</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">nil?</span>&#x000A;    <span class="ruby-identifier">run_command</span>(<span class="ruby-string">'sudo'</span>, <span class="ruby-identifier">args</span>);&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">previous_state</span> = <span class="ruby-ivar">@rye_sudo</span>&#x000A;    <span class="ruby-identifier">enable_sudo</span>&#x000A;    <span class="ruby-identifier">ret</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">instance_exec</span> *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>&#x000A;    <span class="ruby-ivar">@rye_sudo</span> = <span class="ruby-identifier">previous_state</span>&#x000A;    <span class="ruby-identifier">ret</span>  &#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-sudo-3F'>
                <a name='method-i-sudo-3F'></a>
                <div class='synopsis'>
                  <span class='name'>sudo?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-sudo-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-sudo-3F-source'><span class="ruby-comment"># File lib/rye/box.rb, line 50</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">sudo?</span>; <span class="ruby-ivar">@rye_sudo</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-switch_user'>
                <a name='method-i-switch_user'></a>
                <div class='synopsis'>
                  <span class='name'>switch_user</span>
                  <span class='arguments'>(newuser)</span>
                </div>
                <div class='description'>
                  
                  <p>Reconnect as another user. This is different from su= which executes
                  subsequent commands via +su -c COMMAND USER+.</p>
                  <ul><li>
                  <p><code>newuser</code> The username to reconnect as</p>
                  </li></ul>
                  
                  <p>NOTE: if there is an open connection, it's disconnected but not reconnected
                  because it's possible it wasn't  connected yet in the first place (if you
                  create the  instance with default settings for example)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-switch_user-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-switch_user-source'><span class="ruby-comment"># File lib/rye/box.rb, line 283</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">switch_user</span>(<span class="ruby-identifier">newuser</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">newuser</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">to_s</span>&#x000A;  <span class="ruby-ivar">@rye_opts</span> <span class="ruby-operator">||=</span> {}&#x000A;  <span class="ruby-ivar">@rye_user</span> = <span class="ruby-identifier">newuser</span>&#x000A;  <span class="ruby-identifier">disconnect</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-templates'>
                <a name='method-i-templates'></a>
                <div class='synopsis'>
                  <span class='name'>templates</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-templates-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-templates-source'><span class="ruby-comment"># File lib/rye/box.rb, line 45</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">templates</span>; <span class="ruby-ivar">@rye_templates</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-templates-3F'>
                <a name='method-i-templates-3F'></a>
                <div class='synopsis'>
                  <span class='name'>templates?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-templates-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-templates-3F-source'><span class="ruby-comment"># File lib/rye/box.rb, line 46</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">templates?</span>; <span class="ruby-operator">!</span><span class="ruby-ivar">@rye_templates</span>.<span class="ruby-identifier">nil?</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-to_s'>
                <a name='method-i-to_s'></a>
                <div class='synopsis'>
                  <span class='name'>to_s</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>Returns +user@rye_host+</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-to_s-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-to_s-source'><span class="ruby-comment"># File lib/rye/box.rb, line 395</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>; <span class="ruby-string">'%s@rye_%s'</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">user</span>, <span class="ruby-ivar">@rye_host</span>]; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-umask-3D'>
                <a name='method-i-umask-3D'></a>
                <div class='synopsis'>
                  <span class='name'>umask=</span>
                  <span class='arguments'>(val='0022')</span>
                </div>
                <div class='description'>
                  
                  <p>Change the current umask (sort of -- works the same way as cd) The default
                  umask is 0022</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-umask-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-umask-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 269</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">umask=</span>(<span class="ruby-identifier">val</span>=<span class="ruby-string">'0022'</span>)&#x000A;  <span class="ruby-ivar">@rye_current_umask</span> = <span class="ruby-identifier">val</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-unsafely'>
                <a name='method-i-unsafely'></a>
                <div class='synopsis'>
                  <span class='name'>unsafely</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Like batch, except it disables safe mode before executing the block.  After
                  executing the block, safe mode is returned back to whichever state it was
                  previously in. In other words, this method won't enable safe mode if it was
                  already disabled.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-unsafely-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-unsafely-source'><span class="ruby-comment"># File lib/rye/box.rb, line 558</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">unsafely</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">previous_state</span> = <span class="ruby-ivar">@rye_safe</span>&#x000A;  <span class="ruby-identifier">disable_safe_mode</span>&#x000A;  <span class="ruby-identifier">ret</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">instance_exec</span> *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-ivar">@rye_safe</span> = <span class="ruby-identifier">previous_state</span>&#x000A;  <span class="ruby-identifier">ret</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-user'>
                <a name='method-i-user'></a>
                <div class='synopsis'>
                  <span class='name'>user</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-user-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-user-source'><span class="ruby-comment"># File lib/rye/box.rb, line 42</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">user</span>; <span class="ruby-ivar">@rye_user</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-via'>
                <a name='method-i-via'></a>
                <div class='synopsis'>
                  <span class='name'>via</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-via-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-via-source'><span class="ruby-comment"># File lib/rye/box.rb, line 55</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">via</span>; <span class="ruby-ivar">@rye_via</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-via-3D'>
                <a name='method-i-via-3D'></a>
                <div class='synopsis'>
                  <span class='name'>via=</span>
                  <span class='arguments'>(val)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-via-3D-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-via-3D-source'><span class="ruby-comment"># File lib/rye/box.rb, line 60</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">via=</span>(<span class="ruby-identifier">val</span>); <span class="ruby-ivar">@rye_via</span> = <span class="ruby-identifier">val</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-via-3F'>
                <a name='method-i-via-3F'></a>
                <div class='synopsis'>
                  <span class='name'>via?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-via-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-via-3F-source'><span class="ruby-comment"># File lib/rye/box.rb, line 79</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">via?</span>; <span class="ruby-operator">!</span><span class="ruby-ivar">@rye_via</span>.<span class="ruby-identifier">nil?</span>; <span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-via_hop'>
                <a name='method-i-via_hop'></a>
                <div class='synopsis'>
                  <span class='name'>via_hop</span>
                  <span class='arguments'>(*args)</span>
                </div>
                <div class='description'>
                  <ul><li>
                  <p><code>hops</code> <a href="Hop.html">Rye::Hop</a> objects will be added
                  directly</p>
                  </li></ul>
                  
                  <p>to the set. Hostnames will be used to create new instances of <a
                  href="Hop.html">Rye::Hop</a>  h1 = <a
                  href="Hop.html#method-c-new">Rye::Hop.new</a> "host1" h1.via_hop "host2",
                  :user =&gt; "service_user"</p>
                  
                  <p>OR</p>
                  
                  <p>h1 = <a href="Hop.html#method-c-new">Rye::Hop.new</a> "host1" h2 = <a
                  href="Hop.html#method-c-new">Rye::Hop.new</a> "host2" h1.via_hop h2</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-via_hop-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-via_hop-source'><span class="ruby-comment"># File lib/rye/box.rb, line 205</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">via_hop</span>(*<span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-identifier">args</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">compact</span> &#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">nil?</span>&#x000A;    <span class="ruby-keyword">return</span> <span class="ruby-ivar">@rye_via</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Rye</span><span class="ruby-operator">::</span><span class="ruby-constant">Hop</span>)&#x000A;    <span class="ruby-ivar">@rye_via</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)&#x000A;    <span class="ruby-identifier">hop</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">shift</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;      <span class="ruby-ivar">@rye_via</span> = <span class="ruby-constant">Rye</span><span class="ruby-operator">::</span><span class="ruby-constant">Hop</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">hop</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">merge</span>(&#x000A;                                    <span class="ruby-value">:debug</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@rye_debug</span>,&#x000A;                                    <span class="ruby-value">:info</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@rye_info</span>,&#x000A;                                    <span class="ruby-value">:error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@rye_error</span>)&#x000A;                             )&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-ivar">@rye_via</span> = <span class="ruby-constant">Rye</span><span class="ruby-operator">::</span><span class="ruby-constant">Hop</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">hop</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">disconnect</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
